name: auto-deploy
on: [push]
jobs:
  archive-file:
    runs-on: ubuntu-latest
    steps:
      - name: action-zip
        run: zip -r blinker-py.zip . -x ".git/*" ".github/*"
      
      - name: list file
        run: ls *.zip
      
      - name: list all file
        run: ls *

      - name: Deploy
        uses: garygrossgarten/github-action-scp@v0.5.3
        with:
          local: blinker-py.zip
          remote: /home/ubuntu/blinker-py.zip
          host: ${{ secrets.SERVER_IP }}
          username: ubuntu
          privateKey: ${{ secrets.SSH_PRIVATE_KEY }}
          recursive: true