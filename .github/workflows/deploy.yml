name: auto-deploy
on: [push]
jobs:
  archive-file:
    runs-on: ubuntu-latest
    steps:
      - name: action-zip
        uses: montudor/action-zip@v0.1.1
        with:
          args: zip -qq -r blinker-py.zip . -i /home/runner/work/blinker-py/blinker-py
      
      - name: workspance
        run: ls /home/runner/work/blinker-py/blinker-py
      
      - name: list file
        run: ls *.zip
      
      - name: list all file
        run: ls *

      - name: Deploy
        uses: garygrossgarten/github-action-scp@v0.5.3
        with:
          local: ${{ github.workspace }}/blinker-py.zip
          remote: /home/ubuntu/blinker-py.zip
          host: ${{ secrets.SERVER_IP }}
          username: ubuntu
          privateKey: ${{ secrets.SSH_PRIVATE_KEY }}
          recursive: true